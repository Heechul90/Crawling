vec1
vec2<-c(decs(10:6))
vec2<-decs(10:6)
vec2<-desc(1:6)
vec2<-decs(1:6)
vec2<-c(1:6)
desc(vec2)
vec2<-c(10:6)
vec2
vec3<-c(1,2,3)*2
vec3
df_score<-data.frame(90,80,78,60,94,70,92)
df_score
df_score<-data.frame('중간'=c(90,78,94,70),'기말'=c(50,60,90,92))
df_score
df_scroe2<-cbind(df_score, (90+50/2), (78+60/2), (94+90/2), (70+92/2))
df_score2<-cbind(df_score, (90+50/2), (78+60/2), (94+90/2), (70+92/2))
df_score2
average<-(90+50/2), (78+60/2), (94+90/2), (70+92/2)
average<-((90+50/2), (78+60/2), (94+90/2), (70+92/2))
average1<-c((90+50/2), (78+60/2), (94+90/2),(70+92/2))
df_score2<-cbind(df_score, average1)
df_score2
평균<-c((90+50/2), (78+60/2), (94+90/2),(70+92/2))
df_score2<-cbind(df_score, average1)
df_score2
평균<-c((90+50/2), (78+60/2), (94+90/2),(70+92/2))
df_score2<-cbind(df_score, average1)
df_score2
평균<-c(((90+50)/2), ((78+60)/2), ((94+90)/2),((70+92)/2))
df_score2<-cbind(df_score, average1)
df_score2
평균<-c(((90+50)/2), ((78+60)/2), ((94+90)/2),((70+92)/2))
df_score2<-cbind(df_score, 평균)
df_score2
평균<-c(((90+50)/2), ((78+60)/2), ((94+90)/2),((70+92)/2))
df_score2<-cbind(df_score, c)
df_score2<-cbind(df_score, 평균)
평균<-c(((90+50)/2), ((78+60)/2), ((94+90)/2),((70+92)/2))
df_score2<-cbind(df_score, c(((90+50)/2), ((78+60)/2), ((94+90)/2),((70+92)/2)))
df_score2<-cbind(df_score, c(((90+50)/2), ((78+60)/2), ((94+90)/2),((70+92)/2))))
average<-c(((90+50)/2), ((78+60)/2), ((94+90)/2),((70+92)/2))
df_score2<-cbind(df_score, average)
df_score2<-cbind(df_score, average)
df_score<-data.frame('중간'=c(90,78,94,70),'기말'=c(50,60,90,92))
df_score
average<-c(((90+50)/2), ((78+60)/2), ((94+90)/2),((70+92)/2))
df_score2<-cbind(df_score, average)
df_score2
df_score<-data.frame(c('강경학','김태균','이성열','정은원','중간'=c(90,78,94,70),'기말'=c(50,60,90,92)))
df_score
df_score<-data.frame(=c(90,78,94,70),'기말'=c(50,60,90,92))
df_score<-data.frame(='중간'=c(90,78,94,70),'기말'=c(50,60,90,92)))
df_score<-data.frame(='중간'=c(90,78,94,70),'기말'=c(50,60,90,92))
df_score<-data.frame('중간'=c(90,78,94,70),'기말'=c(50,60,90,92))
df_score
average<-c(((90+50)/2), ((78+60)/2), ((94+90)/2),((70+92)/2))
df_score2<-cbind(df_score, average)
df_score2
3.score<-(c('C','D','A','B'))
3.score<-c('C','D','A','B')
3.score<-c(C,D,A,B)
score<-c(C,D,A,B)
score<-c('C','D','A','B')
df_score3<-cbind(df_score2,score)
df_score3
학점<-c('C','D','A','B')
df_score3<-cbind(df_score2,'학점')
df_score3
oddsum<-for (1 in 1+1) {
score<-c('C','D','A','B')
df_score3<-cbind(df_score2,score)
df_score3
oddsum<-for (i in 1:100) { result = i/2 }
oddsum
result(oddsum)
oddsum<-for (i in 1:100) { result = i/2 }
sum=( i+1 ) }
( i+1 ) }
i+1  }
names<-c('강경학','김태균','이성열',정은원')
names<-c('강경학','김태균','이성열',정은원')
names<-c("강경학","김태균","이성열","정은원")
names
names<-data.frame(c("강경학","김태균","이성열","정은원"))
names
names<-rbind(df_score)
names<-rbind(df_score)
names<-rbind(df_score3)
names
names
names2<-rbind(names, df_score3)
names2
names<-c("강경학","김태균","이성열","정은원")
names<-rbind.data.frame(df_score2)
names
names<-c("강경학","김태균","이성열","정은원")
names<-rbind.data.frame(names, df_score2)
names2<-rbind.data.frame(names, df_score2)
names2
names<-c("강경학","김태균","이성열","정은원")
names2<-cbind.data.frame(names, df_score2)
names2
이름<-c("강경학","김태균","이성열","정은원")
names2<-cbind.data.frame(이름, df_score2)
names2
평균<-c(((90+50)/2), ((78+60)/2), ((94+90)/2),((70+92)/2))
df_score2<-cbind(df_score, 평균)
df_score2
df_score<-data.frame('중간'=c(90,78,94,70),'기말'=c(50,60,90,92))
df_score
이름<-c("강경학","김태균","이성열","정은원")
names2<-cbind.data.frame(이름, df_score2)
names2
이름<-c("강경학","김태균","이성열","정은원")
이름<-c("강경학","김태균","이성열","정은원")
names3<-cbind.data.frame(이름, df_score3)
score<-c('C','D','A','B')
df_score3<-cbind(df_score2,score)
df_score3
이름<-c("강경학","김태균","이성열","정은원")
names3<-cbind.data.frame(이름, df_score3)
names3
학점<-c('C','D','A','B')
df_score3<-cbind(df_score2,score)
df_score3
이름<-c("강경학","김태균","이성열","정은원")
names3<-cbind.data.frame(이름, df_score3)
names3
df_score3<-cbind(df_score2,학점)
df_score3
이름<-c("강경학","김태균","이성열","정은원")
names3<-cbind.data.frame(이름, df_score3)
names3
}
if(x%%2=1)
if(x%%2= "y")
if(x%%2= y)
oddsum<-for(i in num){
if(i %% 2 == 0)
}
oddsum<-for(i in 1:100){
if(i %% 2 == 0)
}
data(iris)
data
iris
head(iris)
summary(Sepal.Width)
summary(iris$Sepal.Width)
boxplot(iris$Sepal.Width,col="red")
summary(iris$Sepal.Width)
data(mpg)
head(mpg)
mpg
data(mpg)
mpg
iris
c("mpg")
mpg
mpg
library(mpg)
data=mpg
ggplot(data=mpg)
library(dplyr)
mpg
head(mpg)
library(ggplot2)
head(mpg)
data(mpg)
mpg
library(dplyr)
library(ggplot2)
head(mpg)
summary(mpg$cty&mpg$hwy)
summary(mpg$manufacturer='toyota')
summary(mpg$manufacturer)
filter(manufactuer='toyota')
filter(mpg, manufactuer='toyota')
filter(mpg, manufactuer="toyota")
filter(mpg, manufactuer=="toyota")
filter(mpg, manufacturer=="toyota")
mpg1<-filter(mpg, manufacturer=="toyota")
mpg2<- mpg1 >%> select(cty, hwy)
select(mpg1, contains("cty","hwy"))
mpg1<-filter(mpg, manufacturer=="toyota")
mpg1
select(mpg1, cty:hwy)
select(mpg1, model, cty, hwy)
mpg2<-select(mpg1, model, cty, hwy)
mpg2
barplot(mpg2, x=model)
barplot(mpg2)
mpg2
baxplot(mpg2)
baxplot(mpg2$cty,mpg$hwy)
baxplot(mpg2$cty&mpg$hwy)
baxplot(mpg2$cty)
summary(mpg2$cty & mpg2$hwy)
boxplot(mpg2$cty & mpg2$hwy)
summary(mpg2$cty & mpg2$hwy)
barplot(mpg2$cty & mpg2$hwy)
boxplot(mpg2$cty & mpg2$hwy)
mpg
filter(mpg, mpg$cty)
head(mpg, 7)
mpg3<-filter(mpg, max(cty))
filter(mpg, class=suv)
mpg
filter(mpg,  mpg$class=suv)
filter(mpg$class=suv)
summary(mpg$class=suv)
summary(mpg$class = 'suv')
mpg3<-filter(mpg, class='SUV')
mpg3<-filter(mpg, class="SUV")
mpg3<-filter(mpg, class = "SUV")
mpg3<-filter(mpg, class == "SUV")
mpg3
mpg
mpg3<-filter(mpg, class == "suv")
mpg3
group_by(manufacturer)
mpg3 >%>
mpg3 >%>
mpg >%>
mpg >%>
mpg >%>
mpg3
group_by(manufacturer)
group_by(manufacturer)
mpg3
group_by(manufacturer)
mpg3
summarise(manufacturer)
mpg3<-group_by(mnufacturer)
mpg3<-group_by(manufacturer)
mpg
vec3<-c(1:3)
vec3
vector<-c(1:3)
install.packages("foreign")
library(foreign)
if("ggplot2" %in% installed.packages("ggplot2") == FALSE)install.packages("ggplot2")
library(ggplot2)
if("dplyr" %in% installed.packages("dplyr") == FALSE)install.packages("dplyr")
library(dplyr)
install.packages("readxl")
library(readxl)
install.packages("dplyr")
raw_walfare <- read.spss(file = "https://www.dropbox.com/s/b33ob8v0nmig4bw/Koweps_hpc10_2015_beta1.sav?dl=1", to.data.frame = T)
getwd()
raw_walfare <- read.spss(file="Koweps_hpc10_2015_beta1.sav",to.data.frame = T)
View(head(raw_walfare))
head(raw_walfare)
str(raw_walfare)
summary(raw_walfare)
welfare <- raw_walfare
welfare<-rename(welfare, sex=h10_g3,
birth=h10_g4,
marriage=h10_g10,
religion=h10_g11,
income=p1002_Baq1,
code_job=h10_eco9,
code_region=h10_reg7)
names(welfare)
welfare <- dplyr::rename(
welfare,
sex = h10_g3, # 성별
birth = h10_g4, # 채어난 연도
marriage = h10_g10, # 혼인 상태
religion = h10_g11, # 종교
income = p1002_8aq1, # 월급
code_job = h10_eco9, # 직업 코드
code_region = h10_reg7 # 지역 코드
)
welfare <- subset(welfare,
select = c(sex, birth, marriage, religion, income, code_job, code_region))
head(welfare)
class(welfare$sex)
table(welfare$sex)
welfare$sex <- ifelse(welfare$sex == 9, NA, welfare$sex)
table(is.na(welfare$sex))
# 성별 항목 이름 부여
welfare$sex <- ifelse(welfare$sex == 1, "남성","여성")
table(welfare$sex)
qplot(welfare$sex)
### 월급 변수 검토 및 전처리
class(welfare$income)
summary(welfare$income)
qplot(welfare$income)+ xlim(0,1000)
## 월급 이상치 결측처리
welfare$income <- ifelse(
welfare$income %in% c(0,9999),NA,welfare$income)
table(is.na(welfare$sex))
qplot(welfare$income)
# graph 그리기
ggplot(
data = sex_income,
aes(x=sex, y=mean_income)
) + geom_col()
## 성별에 다른 월급 차이 분석하기
sex_income <- welfare %>%
dplyr::filter(!is.na(income)) %>%
dplyr::group_by(sex) %>%
dplyr::summarise(mean_income = mean(income))
sex_income
# graph 그리기
ggplot(
data = sex_income,
aes(x=sex, y=mean_income)
) + geom_col()
## 나이와 월급의 관계
# 1) 결측치 제거
welfare$birth <- ifelse(welfare$birth==999, NA,welfare$birth)
table(is.na(welfare$birth))
# 2) 나이 만들기
welfare$age <- 2015-welfare$birth + 1
qplot(welfare$age)
age_income <- welfare %>%
filter(!is.na(income)) %>%
group_by(age) %>%
summarise(mean_income = mean(income))
age_income
ggplot(
data =  age_income,
aes(
x= age,
y= mean_income
)
) +geom_line()
## 3) 파생변수 만들기 : mutate()
welfare <- welfare %>%
dplyr::mutate(ageg = ifelse(age<30,"초년",ifelse(age <= 59, "중년", "노년")))
table(welfare$ageg)
qplot(welfare$ageg)
sex_income <- welfare %>%
dplyr::filter(!is.na(income)) %>%
group_by(ageg,sex) %>%
summarise(mean_income = mean(income))
x = ageg,
y = mean_income,
fill = sex)) +
geom_col()+
scale_x_discrete(limits = c("초년", "중년","노년"))
## 5) p230 그래프 옆으로 합치기
ggplot(data= sex_income,aes(x=ageg, y=mean_income, fill = sex))+
geom_col(position="dodge") +
scale_x_discrete(limits=c("초년", "중년","노년"))
sex_age <- welfare %>%
filter(!is.na(income)) %>%
group_by(age, sex) %>%
summarise(mean_income = mean(income))
sex_age <- welfare %>%
filter(!is.na(income)) %>%
group_by(age, sex) %>%
summarise(mean_income = mean(income))
head(sex_age)
ggplot(data=sex_age, aes(x=age, y= mean_income, col= sex))+geom_line()
sex_age <- welfare %>%
filter(!is.na(income)) %>%
group_by(age, sex) %>%
summarise(mean_income = mean(income))
x = ageg,
y = mean_income,
fill = sex)) +
geom_col()+
scale_x_discrete(limits = c("초년", "중년","노년"))
sex_income <- welfare %>%
dplyr::filter(!is.na(income)) %>%
group_by(ageg,sex) %>%
summarise(mean_income = mean(income))
ggplot(
data= sex_income,
aes(
x = ageg,
y = mean_income,
fill = sex)) +
geom_col()+
scale_x_discrete(limits = c("초년", "중년","노년"))
welfare <- welfare %>%
dplyr::mutate(ageg = ifelse(age<30,"초년",ifelse(age <= 59, "중년", "노년")))
table(welfare$ageg)
qplot(welfare$ageg)
sex_income <- welfare %>%
dplyr::filter(!is.na(income)) %>%
group_by(ageg,sex) %>%
summarise(mean_income = mean(income))
sex_income <- welfare %>%
dplyr::filter(!is.na(income)) %>%
dplyr::group_by(sex) %>%
dplyr::summarise(mean_income = mean(income))
sex_income
ggplot(
data = sex_income,
aes(x=sex, y=mean_income)
) + geom_col()
welfare$birth <- ifelse(welfare$birth==999, NA,welfare$birth)
table(is.na(welfare$birth))
head(sex_age)
ggplot(data=sex_age, aes(x=age, y= mean_income, col= sex))+geom_line()
write.xlsx(df_points,
sheetName="Okja",  # 기존의 엑셀 파일에 new라는 시트에 데이터를 넣음
col.names=TRUE,   # 변수이름을 그대로 사용
row.names=FALSE,  # 행이름은 사용하지 않음
append=TRUE)      # 기존의 엑셀 파일이 있으면 그곳에 추가해서 저장
###. 필요 패키지
library(xlsx)
library(writexl)
write.xlsx(df_points,
sheetName="Okja",  # 기존의 엑셀 파일에 new라는 시트에 데이터를 넣음
col.names=TRUE,   # 변수이름을 그대로 사용
row.names=FALSE,  # 행이름은 사용하지 않음
append=TRUE)      # 기존의 엑셀 파일이 있으면 그곳에 추가해서 저장
base_url <- 'https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=143435&type=after&onlyActualPointYn=N&order=newest&page='
df_points <- data.frame(reple=c(), score=c(), date=c(), nickname=c())
for(page in 1 : ceiling(18028/10)) {
url <- paste0(base_url,page)
content <- read_html(url)
node_1 <- html_nodes(content, '.score_reple p')
node_2 <- html_nodes(content, '.score_result .star_score em')
node_3 <- html_nodes(content, '.score_reple dt em:nth-child(2)')
node_4 <- html_nodes(content, '.score_reple dt em') %>%
html_nodes('a')
reple_list <- trim(html_text(node_1))
score_list <- trim(html_text(node_2))
date_list <- trim(html_text(node_3))
date_list <- gsub('\\.', '-', date_list)
nickname_list <- html_text(node_4, 'href')
nickname_list <- gsub("^\\s+|\\s+$", "", nickname_list)
one_df <- data.frame(reple=reple_list, score=score_list, date=date_list, nickname=nickname_list)
#print(score)
df_points <- rbind.data.frame(df_points, one_df)
}
library(curl)
library(httr)
library(rvest)
library(RSelenium)
library(dplyr)
library(stringr)
trim <- function (x) gsub("^\\s+|\\s+$", "", x)
# 링크 가져와서 찾아가기
base_url <- 'https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=143435&type=after&onlyActualPointYn=N&order=newest&page='
df_points <- data.frame(reple=c(), score=c(), date=c(), nickname=c())
for(page in 1 : ceiling(18028/10)) {
url <- paste0(base_url,page)
content <- read_html(url)
node_1 <- html_nodes(content, '.score_reple p')
node_2 <- html_nodes(content, '.score_result .star_score em')
node_3 <- html_nodes(content, '.score_reple dt em:nth-child(2)')
node_4 <- html_nodes(content, '.score_reple dt em') %>%
html_nodes('a')
reple_list <- trim(html_text(node_1))
score_list <- trim(html_text(node_2))
date_list <- trim(html_text(node_3))
date_list <- gsub('\\.', '-', date_list)
nickname_list <- html_text(node_4, 'href')
nickname_list <- gsub("^\\s+|\\s+$", "", nickname_list)
one_df <- data.frame(reple=reple_list, score=score_list, date=date_list, nickname=nickname_list)
#print(score)
df_points <- rbind.data.frame(df_points, one_df)
}
write.xlsx(df_points,
sheetName="Okja",  # 기존의 엑셀 파일에 new라는 시트에 데이터를 넣음
col.names=TRUE,   # 변수이름을 그대로 사용
row.names=FALSE,  # 행이름은 사용하지 않음
append=TRUE)      # 기존의 엑셀 파일이 있으면 그곳에 추가해서 저장
setwd('D:/Heechul/Crawling')
write.xlsx(df_points,
sheetName="Okja",  # 기존의 엑셀 파일에 new라는 시트에 데이터를 넣음
col.names=TRUE,   # 변수이름을 그대로 사용
row.names=FALSE,  # 행이름은 사용하지 않음
append=TRUE)      # 기존의 엑셀 파일이 있으면 그곳에 추가해서 저장
write.xlsx(df_points,
sheetName="Okja",  # 기존의 엑셀 파일에 new라는 시트에 데이터를 넣음
col.names=TRUE,   # 변수이름을 그대로 사용
row.names=FALSE)  # 행이름은 사용하지 않음
write.xlsx(df_points,
col.names=TRUE,   # 변수이름을 그대로 사용
row.names=FALSE)  # 행이름은 사용하지 않음
head(df_points)
setwd('D:/Heechul/Crawling')
###. 필요 패키지
library(xlsx)
library(writexl)
library(curl)
library(httr)
library(rvest)
library(RSelenium)
library(dplyr)
library(stringr)
trim <- function (x) gsub("^\\s+|\\s+$", "", x)
# 링크 가져와서 찾아가기
base_url <- 'https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=143435&type=after&onlyActualPointYn=N&order=newest&page='
df_points <- data.frame(reple=c(), score=c(), date=c(), nickname=c())
for(page in 1 : ceiling(18028/10)) {
url <- paste0(base_url,page)
content <- read_html(url)
node_1 <- html_nodes(content, '.score_reple p')
node_2 <- html_nodes(content, '.score_result .star_score em')
node_3 <- html_nodes(content, '.score_reple dt em:nth-child(2)')
node_4 <- html_nodes(content, '.score_reple dt em') %>%
html_nodes('a')
reple_list <- trim(html_text(node_1))
score_list <- trim(html_text(node_2))
date_list <- trim(html_text(node_3))
date_list <- gsub('\\.', '-', date_list)
nickname_list <- html_text(node_4, 'href')
nickname_list <- gsub("^\\s+|\\s+$", "", nickname_list)
one_df <- data.frame(reple=reple_list, score=score_list, date=date_list, nickname=nickname_list)
#print(score)
df_points <- rbind.data.frame(df_points, one_df)
}
